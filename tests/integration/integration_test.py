import requests
import json

test_sample = json.dumps({'data': [
    [15, 156, 163, 77, 176, 173, 113, 26, 56, 197, 173, 140, 107, 143, 197, 194, 104, 95, 80, 140, 107, 197, 173, 146, 146, 44, 77, 29, 104, 125, 119, 113, 197, 80, 68, 197, 128, 59, 23, 113, 32, 116, 68, 122, 194, 20, 20, 182, 179, 83, 146, 128, 71, 71, 143, 158, 53, 56, 44, 98, 71, 83, 137, 50, 137, 80, 185, 74, 83, 35, 128, 173, 173, 128, 38, 113, 50, 59, 128, 152, 143, 29, 128, 167, 152, 146, 98, 65, 158, 44, 143, 182, 98, 164, 86, 140, 68, 59, 44, 197, 146, 29, 158, 167, 131, 41, 137, 125, 164, 176, 65, 131, 32, 128, 140, 161, 89, 29, 20, 20, 53, 44, 50, 137, 98, 131, 62, 41, 128, 29, 35, 59, 77, 188, 134, 29, 146, 155, 68, 20, 170, 125, 104, 164, 62, 23, 191], 
    [149, 197, 194, 170, 29, 83, 71, 194, 188, 110, 101, 146, 44, 146, 116, 20, 20, 68, 15, 156, 163, 191, 98, 44, 173, 149, 101, 41, 89, 155, 20, 128, 182, 71, 83, 47, 128, 41, 26, 32, 26, 95, 80, 164, 164, 116, 149, 146, 44, 95, 146, 176, 80, 116, 95, 74, 185, 143, 191, 68, 32, 107, 137, 107, 134, 65, 80, 173, 125, 113, 50, 191, 77, 35, 86, 83, 56, 77, 122, 113, 26, 26, 95, 128, 53, 98, 131, 176, 29, 146, 80, 155, 92, 65, 65, 20, 74, 134, 170, 137, 191, 152, 176, 176, 143, 89, 56, 122, 134, 194, 122, 134, 134, 95, 101, 68, 50, 53, 113, 77, 89, 191, 149, 92, 62, 86, 89, 182, 83, 92, 98, 113, 119, 167, 65, 80, 104, 140, 146, 20, 137, 92, 35, 98, 122, 113, 38]
]})
test_sample = str(test_sample)

def test_ml_service(scoreurl, scorekey):
    assert scoreurl != None

    if scorekey is None:
        headers = {'Content-Type':'application/json'}
    else:
        headers = {'Content-Type':'application/json', 'Authorization':('Bearer ' + scorekey)}

    resp = requests.post(scoreurl, test_sample, headers=headers)
    assert resp.status_code == requests.codes.ok
    assert resp.text != None
    assert resp.headers.get('content-type') == 'application/json'
    assert int(resp.headers.get('Content-Length')) > 0
